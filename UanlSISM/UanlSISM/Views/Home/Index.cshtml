@{
    ViewBag.Title = "Inicio";
}

@using Microsoft.AspNet.Identity

<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">

<style>
    #home-seccion {
        margin-top: 20px;
    }

    .icons {
        width: 15vw;
    }

    .item {
        padding: 10px;
    }

    .item-card {
        transition: 0.5s;
        cursor: pointer;
        padding: 20px;
    }

    .card-link {
        background-color: #FBC43D;
        border-color: #FBC43D;
        color: white;
        padding: 5px 20px;
    }

        .card-link:hover {
            text-decoration: none;
            color: white;
        }

    .item-card-title {
        font-size: 1.1vw;
        transition: 1s;
        font-weight: bolder;
        cursor: pointer;
    }

        .item-card-title i {
            font-size: 15px;
            transition: 1s;
            cursor: pointer;
            color: #ffa710
        }

    .card-title i:hover {
        transform: scale(1.25) rotate(20deg);
        color: #18d4ca;
    }

    .card:hover {
        transform: scale(1.05);
        /*box-shadow: 5px 5px 5px rgba(0,0,0,0.3);*/
    }

    .card::before, .card::after {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        transform: scale3d(0, 0, 1);
        transition: transform .3s ease-out 0s;
        background: rgba(255, 255, 255, 0.1);
        content: '';
        pointer-events: none;
    }

    .card::before {
        transform-origin: left top;
    }

    .card::after {
        transform-origin: right bottom;
    }

    .card:hover::before, .card:hover::after, .card:focus::before, .card:focus::after {
        transform: scale3d(1, 1, 1);
    }


    .modal-content {
        margin-top: 10vw;
    }

    .btn-aviso {
        background-color: #FBC43D !important;
        color: white !important;
        border: 2px solid #FBC43D;
    }

    .btn-mod {
        background-color: #FBC43D !important;
        color: white !important;
        border: 2px solid #FBC43D;
        width: 100%;
    }

    #modalidad{
        border:2PX solid #FBC43D;
    }
</style>

<style type="text/css" media="screen and (max-width: 767px)">

    .item-card-title {
        font-size: 3vw;
    }
</style>


<div class="row animate__animated animate__fadeIn d-flex justify-content-around" id="home-seccion">
    @if (Request.IsAuthenticated)
    {
        if (HttpContext.Current.User.IsInRole("RecursosHumanos"))
        {
            <div class="col-md-6 col-sm-6 item text-center">
                <a href="@Url.Action("Index", "MenuRH")">
                    <div class="card item-card card-block">
                        <center><img class="icons" src="~/Imagenes/iconos/SISTEMA-ADMINISTRATIVO-3x.png" /></center>
                        <h5 class="item-card-title mt-3 mb-3">Sistema Administrativo</h5>
                    </div>
                </a>
            </div>
        }

        <div class="col-md-6 col-sm-6 item text-center">
            <a href="@Url.Action("Medico", "Manage")">
                <div class="card item-card card-block">
                    <center><img class="icons" src="~/Imagenes/iconos/SISTEMA-MEDICO-3x.png" /></center>
                    <h5 class="item-card-title mt-3 mb-3">Sistema Médico</h5>
                </div>
            </a>
        </div>
        <!--div class="col-md-3 col-sm-6 item text-center">
            <a href="@Url.Action("Reportes", "Manage")">
            <div class="card item-card card-block">
                <center><img class="icons" src="~/Imagenes/iconfinder_file_3708111.png" /></center>
                <h5 class="item-card-title mt-3 mb-3">Reportes Medicos</h5>
                <p class="card-text">
                    Identificar indicadores a partir de la encuesta que informen sobre las
                    respuesta y poder tomar medidas de contención.
                </p>
                <button class="card-link">Ver más</button>
            </div>
            </a>
        </div>
        <div class="col-md-3 col-sm-6 item text-center">
            <div class="card item-card card-block">
                <center><img class="icons" src="~/Imagenes/iconfinder_stetoskop_3708104.png" /></center>
                <h5 class="item-card-title mt-3 mb-3">Consultas</h5>
                <p class="card-text">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent lacinia semper sem.
                    Proin non fermentum nulla, quis porttitor nisi.
                </p>
                <a href="#" class="card-link"> Ver más</a>
            </div>
        </div>
        <div class="col-md-3 col-sm-6 item text-center">
            <div class="card item-card card-block">
                <center><img class="icons" src="~/Imagenes/iconfinder_Artboard_23_6015036.png" /></center>
                <h5 class="item-card-title mt-3 mb-3">Citas</h5>
                <p class="card-text">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent lacinia semper sem.
                    Proin non fermentum nulla, quis porttitor nisi.
                </p>
                <a href="#" class="card-link"> Ver más</a>
            </div>
        </div>

        <div class="col-md-3 col-sm-6 item text-center">
            <a href="@Url.Action("verDhabientes", "Manage")">
            <div class="card item-card card-block">
                <center><img class="icons" src="~/Imagenes/iconfinder_Aproved_Outline_User_Approved_3545094.png" /></center>
                <h5 class="item-card-title mt-3 mb-3">Actualizar Información</h5>
                <p class="card-text">
                    Despliega los datos generales de un usuario específico, para poder modificarlos en caso de que sea necesario
                    actulizar su información.
                </p>
                <button class="card-link">Ver más</button>
            </div>
            </a>
        </div-->


        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

        <script>
            $.ajax({
                url: '@Url.Action("MostrarAviso", "Avisos")',
                dataType: "json",
                //data: { numemp: $("#numemp").val() },
                success: function (data) {
                    if (data) {
                        $('.aviso').html(data.aviso);
                        $('#avisosModal').modal("show");
                    }

                },
                error: function (xhr, status, error) {
                    Swal.fire({
                        position: 'center',
                        icon: 'error',
                        title: 'Error',
                        showConfirmButton: false,
                        //timer: 10000
                    });
                }
            });



            $(document).on('click', '.btn-aviso', function () {
                //alert('dsfsd');
                $.ajax({
                    url: '@Url.Action("ConfirmarAviso", "Avisos")',
                    dataType: "json",
                    //data: { numemp: $("#numemp").val() },
                    success: function (data) {
                        $('#avisosModal').modal("hide");
                    },
                    error: function (xhr, status, error) {
                        Swal.fire({
                            position: 'center',
                            icon: 'error',
                            //stitle: 'Expediente no encontrado',
                            showConfirmButton: false,
                            //timer: 10000
                        });
                    }
                });
            });

        </script>


    }
    else
    {
        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img class="d-block w-100" src="~/Imagenes/slider1.jpg" alt="slider1">
                </div>
                <div class="carousel-item">
                    <img class="d-block w-100" src="~/Imagenes/slider2.jpg" alt="slider2">
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>

    }
</div>


<!-- Modal -->
<div class="modal fade" id="avisosModal" tabindex="-1" role="dialog" aria-labelledby="avisosModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" role="document">
        <div class="modal-content p-3">
            <div class="row m-0">
                <div class="col-md-12 p-2 text-center">
                    <h1><b>¡Aviso Importante!</b></h1>
                </div>
                <div class="col-md-12 p-2 text-center aviso">

                </div>
                <div class="col-md-12 p-2 text-center mb-3">
                    <button class="btn btn-aviso">Enterado</button>
                </div>
                <div class="col-12 p-2 text-center">
                    <img style="width:10%;" src="~/Imagenes/somos-uni.png" />
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Modal -->
<div class="modal fade" id="modModal" tabindex="-1" role="dialog" aria-labelledby="avisosModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" role="document">
        <div class="modal-content p-3">
            <div class="row m-0">
                <div class="col-md-12 p-2 text-center">
                    <h1><b>Modalidad</b></h1>
                </div>
                <div class="col-md-12 p-2 text-center">
                    <select class="form-control" style="max-width:100%;" id="modalidad" name="modalidad" required>
                        <option disabled selected>Selecciona modalidad</option>
                        <option value="Con agenda">Con agenda</option>
                        <option value="Sin agenda">Sin agenda</option>
                    </select>
                </div>
                <div class="col-md-12 p-2 text-center mb-3">
                    <button class="btn btn-mod">Confirmar</button>
                </div>
                <div class="col-12 p-2 text-center">
                    <img style="width:10%;" src="~/Imagenes/somos-uni.png" />
                </div>
            </div>
        </div>
    </div>
</div>


@if (HttpContext.Current.User.IsInRole("SelecionaModalidad"))
{
<script>
        $('#modModal').modal("show");

        $(".btn-mod").click(function () {
            var modalidad = $('#modalidad').val();

            //alert(modalidad);

            if (modalidad != null) {

                $.ajax({
                    url: '@Url.Action("CambiarModalidad", "ServiciosMedicos")',
                    dataType: "json",
                    data: { modalidad: modalidad },
                    success: function (data) {
                        window.location.href = '@Url.Action("Medico", "Manage")';
                    },
                    error: function (xhr, status, error) {
                        Swal.fire({
                            position: 'center',
                            icon: 'error',
                            title: 'Error',
                            showConfirmButton: false,
                            //timer: 10000
                        });
                    }
                });

            } else {
                Swal.fire({
                    position: 'center',
                    icon: 'warning',
                    title: 'Selecciona una modalidad',
                    showConfirmButton: false,
                    //timer: 10000
                });
            }


        });
</script>
}