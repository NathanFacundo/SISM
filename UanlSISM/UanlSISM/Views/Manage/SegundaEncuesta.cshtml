@model IEnumerable<UanlSISM.Models.encuesta_covid_segunda>
@{
    ViewBag.Title = "Filtro";
}

<style>
    input, select, textarea {
        max-width: 100%;
    }

    footer {
        display: none;
    }

    #criterio1 {
        padding-top: 15px;
        padding-bottom: 15px;
    }

    #temperatura {
        padding-top: 20px;
        padding-bottom: 20px;
    }

    #criterio2 {
        padding-top: 20px;
        padding-bottom: 20px;
    }

    #criterio3 {
        padding-top: 20px;
        padding-bottom: 20px;
    }

    #criterio4 {
        padding-top: 20px;
        padding-bottom: 20px;
    }

    .card-header {
        padding-top: 1vw;
        padding-bottom: 1vw;
        font-size: 22px;
        font-weight: bolder;
    }

    .btn-info {
        padding: 2px;
        padding-bottom: 0px;
        background-color: rgba(0,74,143,0.8) !important
    }

        .btn-info:hover {
            color: white;
        }

    #numemp {
        width: 97%;
    }

    .form-inline {
        margin-bottom: 15px;
    }

    .text-center {
        text-align: center;
    }

    #printThis{
        margin-top:3vw;
    }

    .btn-regresar {
        margin-top: 5vw;
    }

    .logo-print{
        width:5vw;
    }

    .printing {
        width: 100%;
        color: white;
        background-color: #FBC43D;
    }
</style>

<style type="text/css" media="screen and (max-width: 991px)">

    #numemp {
        width: 94%;
    }

</style>

<style type="text/css" media="screen and (max-width: 767px)">
    #numemp {
        width: 85%;
    }
</style>

<link rel='stylesheet' href='https://fonts.googleapis.com/icon?family=Material+Icons'>

<div class="row">
    <div class="col-md-12" id="menu">
        <table>
            <tr>
                <td><a href="@Url.Action("Index", "Home")"><b>Inicio</b></a></td>
                <td> <span class="material-icons">keyboard_arrow_right</span></td>
                <td><a href="@Url.Action("Medico", "Manage")"><b>Médico</b></a></td>
                <td> <span class="material-icons">keyboard_arrow_right</span></td>
                <td><a href="@Url.Action("Reportes", "Manage")"><b>Reportes</b></a></td>
                <td> <span class="material-icons">keyboard_arrow_right</span></td>
                <td><a href="@Url.Action("SegundaEncuesta", "Manage")"><b>Filtro</b></a></td>
            </tr>
        </table>
    </div>
</div>

<div class="row justify-content-center">
    @if (TempData["expediente"] != null) { 
        <div class="col-md-12 animate__animated animate__fadeIn" id="printThis" style="-webkit-box-shadow: 0px 0px 10px 2px rgba(0,0,0,0.25);-moz-box-shadow: 0px 0px 10px 2px rgba(0,0,0,0.25);box-shadow: 0px 0px 10px 2px rgba(0,0,0,0.25);">
            <div class="alert alert-light" role="alert">
                <table style="width:100%; margin-bottom:4vw; margin-top:2vw;">
                    <tr>
                        <td><img style="width:25vw;" src="~/Imagenes/logo-sm.png" /></td>
                        <td style="text-align:right;"><img style="width:20vw;" src="~/Imagenes/uanl-logo.png" /></td>
                    </tr>
                </table>
                <!--h4 style="font-family: Arial, Helvetica, sans-serif;" class="alert-heading">Información agregada con éxito</h4-->
                @if (TempData["nombre"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Nombre:</b> @TempData["nombre"]</h4>
                }
                @if (TempData["edad"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Edad:</b> @TempData["edad"]</h4>
                }
                @if (TempData["expediente"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Expediente:</b> @TempData["expediente"]</h4>
                }

                @if (TempData["antecedentes_medicos"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Antecedentes Médicos:</b> @TempData["antecedentes_medicos"]</h4>
                }

                <hr>

                <h5 style="font-family: Arial, Helvetica, sans-serif;">CRITERIO 1</h5>
                @if (TempData["fiebre"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>¿El paciente tiene fibre?:</b> @TempData["fiebre"]</h4>
                }

                <hr>


                <h4 style="font-family: Arial, Helvetica, sans-serif;">CRITERIO 2</h4>
                @if (TempData["tos"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Tos seca o con expectoración:</b> @TempData["tos"]</h4>
                }
                @if (TempData["anosmia"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Anosmia:</b> @TempData["anosmia"]</h4>
                }
                @if (TempData["diarrea"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Diarrea:</b> @TempData["diarrea"]</h4>
                }
                @if (TempData["mialgias_atralgias"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Mialgias y Atralgias:</b> @TempData["mialgias_atralgias"]</h4>
                }

                <hr />


                <h4 style="font-family: Arial, Helvetica, sans-serif;">CRITERIO 3</h4>
                @if (TempData["hta_cardivascular"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>HTA / Enfermedad Cardivascular:</b> @TempData["hta_cardivascular"]</h4>
                }
                @if (TempData["diabetes_mellitus"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Diabetes Mellitus 1/2:</b> @TempData["diabetes_mellitus"]</h4>
                }
                @if (TempData["tabaquismo"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Tabaquismo igual o mayor a 10 paquetes al año:</b> @TempData["tabaquismo"]</h4>
                }
                @if (TempData["enf_inmunologica"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Enfermedad Inmunológica:</b> @TempData["enf_inmunologica"]</h4>
                }
                @if (TempData["enf_reumatologia"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Enfermedad Reumatológia:</b> @TempData["enf_reumatologia"]</h4>
                }
                @if (TempData["enf_neoplasica"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Enfermedad Neoplasica Organo Solido o Hermatológico:</b> @TempData["enf_reumatologia"]</h4>
                }
                @if (TempData["irc"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>I.R.C:</b> @TempData["irc"]</h4>
                }
                @if (TempData["edad_mayo"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Edad mayor a 70 años:</b> @TempData["edad_mayo"]</h4>
                }


                <hr />


                <h4 style="font-family: Arial, Helvetica, sans-serif;">CRITERIO 4</h4>
                @if (TempData["fr"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>FR igual o mayor a 25 rpm:</b> @TempData["fr"]</h4>
                }
                @if (TempData["disnea"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Disnea de reposo:</b> @TempData["disnea"]</h4>
                }
                @if (TempData["saturacion_oxigeno"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Saturacion de oxigeno igual o menor a 90%:</b> @TempData["saturacion_oxigeno"]</h4>
                }
                @if (TempData["hipotension"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Hipotensión:</b> @TempData["hipotension"]</h4>
                }
                @if (TempData["alteracion_estado"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Alteración del estado de conciencia (estuporoso, en coma):</b> @TempData["alteracion_estado"]</h4>
                }
                @if (TempData["alteracion_pulmonares"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Alteraciones pulmonares a la ascultación (crepitantes, SD de consoliación, SD de derrame, sibilantes, roncantes):</b> @TempData["alteracion_pulmonares"]</h4>
                }

                <hr />

                @if (TempData["notas"] != null)
                {
                    <h4 style="font-family: Arial, Helvetica, sans-serif;"><b>Notas:</b> @TempData["notas"]</h4>
                }

                <div style="font-family: Arial, Helvetica, sans-serif; padding-top:10px; border-top: 2px solid black; width:40%; margin-left:30%; text-align:center; margin-top:15vw; margin-bottom:5vw;"><b>Firma</b></div>

                <button class="btn printing btn-regresar" onclick='printDiv();'>Imprimir</button>


            </div>

        </div>
    }
    <div class="col-md-12  animate__animated animate__fadeIn">
        <div class="card">
            <div class="card-header">Filtro</div>

                @using (Html.BeginForm("SaveSegundaEncuesta", "Manage", FormMethod.Post))
                {
                    <div class="form-group pt-3 pl-4 pr-4">
                        <h5><strong>INFORMACIÓN GENERAL</strong></h5>
                    </div>
                    <div class="form-inline pt-3 pl-4 pr-4">
                        <label for="expediente">Expediente</label>
                        <input class="form-control" type="search" id="numemp" name="expediente" placeholder="Expediente" aria-label="Expediente">
                        <button class="btn btn-info" type="button"><i class="material-icons">search</i></button>
                    </div>
                    <div class="form-group pt-3 pl-4 pr-4">
                        <label for="nombre">Nombre</label>
                        <input type="text" class="form-control" name="nombre" id="mostarNombre" value="" placeholder="Nombre" required>
                        <label for="edad">Edad</label>
                        <input type="text" class="form-control" name="edad" id="mostarFecha" value="" placeholder="Edad" required>

                    </div>

                    <div class="form-group pt-3 pl-4 pr-4">
                        <label class="mt-2" for="">Antecedentes médicos</label>
                        <textarea name="antecedentes_medicos" id="antecedentes_medicos" class="form-control"></textarea>
                    </div>

                    <div class="form-group pt-3 pl-4 pr-4" id="criterio1">
                        <h5><strong>CRITERIO 1</strong></h5>
                        <label for="fiebre">¿El paciente tiene fiebre?</label>
                        <select class="form-control" id="fiebre" name="fiebre" required>
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>
                    </div>


                    <div class="form-group pt-3 pl-4 pr-4" id="criterio2">
                        <h5 class="mt-2"><strong>CRITERIO 2</strong></h5>
                        <label class="mt-2" for="tos">Tos seca o con expectoración</label>
                        <select class="form-control" id="tos" name="tos">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>

                        <label class="mt-2" for="mialgias">Anosmia</label>
                        <select class="form-control" id="anosmia" name="anosmia">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>

                        <label class="mt-2" for="artralgias">Diarrea</label>
                        <select class="form-control" id="diarrea" name="diarrea">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>

                        <label class="mt-2" for="conjuntivitis">Mialgias y Atralgias</label>
                        <select class="form-control" id="mialgias_atralgias" name="mialgias_atralgias">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>
                    </div>


                    <div class="form-group pt-3 pl-4 pr-4" id="criterio3">
                        <h5 class="mt-2"><strong>CRITERIO 3</strong></h5>
                        <label class="mt-2" for="hta_cardivascular">HTA / Enfermedad Cardivascular</label>
                        <select class="form-control" id="hta_cardivascular" name="hta_cardivascular">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>

                        <label class="mt-2" for="diabetes_mellitus">Diabetes Mellitus 1/2</label>
                        <select class="form-control" id="diabetes_mellitus" name="diabetes_mellitus">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>


                        <label class="mt-2" for="tabaquismo">Tabaquismo igual o mayor a 10 paquetes al año</label>
                        <select class="form-control" id="tabaquismo" name="tabaquismo">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>


                        <label class="mt-2" for="enf_inmunologica">Enfermedad Inmunológica</label>
                        <select class="form-control" id="enf_inmunologica" name="enf_inmunologica">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>


                        <label class="mt-2" for="enf_reumatologia">Enfermedad Reumatológica</label>
                        <select class="form-control" id="enf_reumatologia" name="enf_reumatologia">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>


                        <label class="mt-2" for="enf_neoplasica">Enfermedad Neoplasica Organo Solido o Hermatológico</label>
                        <select class="form-control" id="enf_neoplasica" name="enf_neoplasica">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>


                        <label class="mt-2" for="irc">I.R.C.</label>
                        <select class="form-control" id="irc" name="irc">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>


                        <label class="mt-2" for="edad_mayo">Edad mayor a 70 años</label>
                        <select class="form-control" id="edad_mayo" name="edad_mayo">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>




                    </div>


                    <div class="form-group pt-3 pl-4 pr-4" id="criterio4">
                        <h5 class="mt-2"><strong>CRITERIO 4</strong></h5>
                        <label class="mt-2" for="fr">FR igual o mayor a 25 rpm</label>
                        <select class="form-control" id="fr" name="fr">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>

                        <label class="mt-2" for="disnea">Disnea de reposo</label>
                        <select class="form-control" id="disnea" name="disnea">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>


                        <label class="mt-2" for="saturacion_oxigeno">Saturacion de oxigeno igual o menor a 90%</label>
                        <select class="form-control" id="saturacion_oxigeno" name="saturacion_oxigeno">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>


                        <label class="mt-2" for="hipotension">Hipotensión</label>
                        <select class="form-control" id="hipotension" name="hipotension">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>


                        <label class="mt-2" for="alteracion_estado">Alteración del estado de conciencia (estuporoso, en coma)</label>
                        <select class="form-control" id="alteracion_estado" name="alteracion_estado">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>


                        <label class="mt-2" for="alteracion_pulmonares">Alteraciones pulmonares a la ascultación (crepitantes, SD de consoliación, SD de derrame, sibilantes, roncantes) </label>
                        <select class="form-control" id="alteracion_pulmonares" name="alteracion_pulmonares">
                            <option value="">Selecciona una opción</option>
                            <option value="1">
                                Si
                            </option>
                            <option value="2">
                                No
                            </option>
                        </select>


                    </div>

                    <div class="form-group pt-3 pl-4 pr-4">
                        <label class="mt-2" for="">Notas</label>
                        <textarea name="notas" id="notas" class="form-control"></textarea>
                    </div>

                    <!--div class="form-group p-3 text-center" id="resultado1">
            <h5>Resultado 1</h5>
        </div>

        <div class="form-group p-3 text-center" id="resultado2">
            <h5>Resultado 2</h5>
        </div-->


                    <div class="form-group p-4">
                        <button type="submit" style="width:100%;" class="btn btn-success">Enviar</button>
                    </div>
                }
        </div>
    </div>
</div>

<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>

<script>
    $(function () {

        $('.close').click(function () {
            $('.alert').hide(200);
        });
    });
</script>

<script>
    $(function () {
        /*$('#criterio2').hide();*/
        $('#criterio3').hide();
        $('#criterio4').hide();
        //$('#resultado1').hide();
        //$('#resultado2').hide();

        /*$('#criterio4 .form-control').change(function () {
            if ($('#fr').val() == '1' || $('#disnea').val() == '1' || $('#saturacion_oxigeno').val() == '1' || $('#hipotension').val() == '1' || $('#alteracion_estado').val() == '1' || $('#alteracion_pulmonares').val() == '1') {
                $('#resultado2').show(200);
                $('#resultado1').hide();
            } else {
                //$('#resultado1').hide();
                $('#resultado2').hide();
            }
        });*/

        $('#criterio3 .form-control').change(function () {
            if ($('#hta_cardivascular').val() == '1' || $('#diabetes_mellitus').val() == '1' || $('#tabaquismo').val() == '1' || $('#enf_inmunologica').val() == '1' || $('#enf_reumatologia').val() == '1' || $('#enf_neoplasica').val() == '1' || $('#irc').val() == '1' || $('#edad_mayo').val() == '1') {
                $('#criterio4').show(200);
                //$('#resultado1').show(200);
                //$('#resultado2').hide();
            } else {
                $('#criterio4').hide();
                //$('#resultado1').hide();
                //$('#resultado2').hide();
            }
        });

        $('#criterio2 .form-control').change(function () {
            if ($('#tos').val() == '1' || $('#anosmia').val() == '1' || $('#diarrea').val() == '1' || $('#mialgias_atralgias').val() == '1') {
                $('#criterio3').show(200);
            } else {
                $('#criterio3').hide(200);
                $('#criterio4').hide(200);
            }
        });

        $('#fiebre').change(function () {
            if ($('#fiebre').val() == '1') {
                /*$('#criterio2').show(200);*/
            } else {
                /*$('#criterio2').hide(200);*/
                $('#criterio3').hide(200);
                $('#criterio4').hide(200);
            }
        });

    });
</script>

<script src="http://code.jquery.com/jquery-1.10.2.js"></script>
<script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script>
    //$('#exampleModal').modal('show');
    $(".btn-info").click(function (request, response) {
            $.ajax({
                url: '@Url.Action("BuscarExpSegundaEnc", "Manage")',
                dataType: "json",
                data: { search: $("#numemp").val() },
                success: function (data) {
                    response($.map(data, function (item) {
                        //return { label: item.Expediente, value: item.Expediente };
                        //$('#mostarPaciente').fadeIn();
                        //console.log(data.fecha_nacimiento);
                        $('#mostarNombre').val(data.nombres);
                        var split1 = data.fecha_nacimiento.split(" ");
                        var split2 = split1[0].split("/");
                        var hoy = new Date().getFullYear();
                        var edad = hoy - split2[2];
                        $('#mostarFecha').val(edad);
                        //$('#exampleModal').modal('show');
                        /*setTimeout(function () {
                            window.location.href = "/";
                        }, 6000);*/
                    }));
                },
                error: function (xhr, status, error) {
                    alert("Error");
                }
            });
    });
</script>

<script>
    function printDiv() {

        var divToPrint = document.getElementById('printThis');

        var newWin = window.open('', 'Print-Window');

        newWin.document.open();

        newWin.document.write('<html><body onload="window.print()">' + divToPrint.innerHTML + '</body></html>');

        newWin.document.close();

        setTimeout(function () { newWin.close(); }, 10);

    }
</script>
